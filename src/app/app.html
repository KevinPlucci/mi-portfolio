<nav class="topbar">
  <div class="wrap home-grid">
    <!-- Brand + Nav Links (Left side) -->
    <div class="nav-left">
      <a routerLink="/home" class="brand">
        <span>MiPorfolio</span>
      </a>
      <div class="nav-links">
        <a routerLink="/quien-soy" routerLinkActive="active">Quién Soy</a>

        <!-- Menú Desplegable de Juegos -->
        <div class="nav-item-group">
          <a
            class="nav-group-toggle"
            routerLink="/juegos"
            routerLinkActive="active"
            >Juegos</a
          >
          <div class="nav-group-items">
            <a routerLink="/juegos/mayor-menor" routerLinkActive="active"
              >Mayor o Menor</a
            >
            <a routerLink="/juegos/ahorcado" routerLinkActive="active"
              >Ahorcado</a
            >
            <a routerLink="/preguntados" routerLinkActive="active"
              >Preguntados</a
            >
            <a routerLink="/mi-juego" routerLinkActive="active">Secuencias</a>
          </div>
        </div>
        <!-- Fin de Menú Juegos -->
      </div>
    </div>

    <!-- Auth controls (Right side) -->
    <div class="auth-controls">
      <!-- Nuevo Menú Desplegable "+ Mas" -->
      <!-- Le añadimos la clase 'menu-right' para un estilo de animación diferente -->
      <div class="nav-item-group menu-right">
        <a class="nav-group-toggle">+ Mas</a>
        <div class="nav-group-items">
          <a routerLink="/chat" routerLinkActive="active">Chat</a>
          <a routerLink="/encuesta" routerLinkActive="active">Encuesta</a>
          <a routerLink="/listados" routerLinkActive="active">Listados</a>
          <!-- Link solo para Admin -->
          @if(auth.isAdmin$ | async){
          <a
            routerLink="/encuesta-respuestas"
            routerLinkActive="active"
            class="link-admin"
            >Respuestas</a
          >
          }
        </div>
      </div>
      <!-- Fin de Menú + Mas -->

      @if (auth.user$ | async; as user) {
      <!-- Admin Badge -->
      @if(auth.isAdmin$ | async){
      <span class="pill admin">ADMIN</span>
      }
      <!-- Estilo de 'pill' aplicado al saludo -->
      <span class="user-greeting pill info">{{ user.email }}</span>
      <button class="btn btn-logout" (click)="logout()">Cerrar sesión</button>
      } @else {
      <a routerLink="/login" class="btn btn-secondary">Login</a>
      <a routerLink="/registro" class="btn btn-primary">Registro</a>
      }
    </div>
  </div>
</nav>

<!--
  ELIMINAMOS EL BINDING DE CLASE:
  [class.is-fixed-page]="isPageFixed()"
-->
<main class="page">
  <router-outlet />
</main>
