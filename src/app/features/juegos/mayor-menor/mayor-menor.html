<section class="mm">
  <!-- Card principal centrada en grid 12 (igual a Quién Soy) -->
  <div class="home-grid">
    <div class="about-card blue-skin">
      <div class="hero">
        <h2>Mayor o Menor</h2>
      </div>

      <!-- Panel interno claro para el juego -->
      <div class="panel">
        <!-- Estado de Carga Inicial -->
        @if (loading() && !current()) {
        <div class="status-box">Cargando mazo...</div>
        }

        <!-- Juego en Progreso -->
        @if (!finished() && current()) {
        <div class="game-board">
          <div class="card-area">
            <div class="card-box">
              <p>Carta Actual</p>
              <img
                [src]="current()?.image"
                [alt]="current()?.code"
                class="card-img"
              />
            </div>

            <div class="card-box next-card-box">
              <p>Carta Oculta</p>

              @if (next()) {
              <!-- Tenemos la próxima carta, pero la mostramos boca abajo a menos que se habilite revealNext -->
              <img
                [src]="revealNext() ? next()!.image : 'https://deckofcardsapi.com/static/img/back.png'"
                [alt]="revealNext() ? next()!.code : 'Carta boca abajo'"
                class="card-img"
              />
              } @else if (loading()) {
              <!-- Mientras roba, mostramos dorso con pulso -->
              <img
                src="https://deckofcardsapi.com/static/img/back.png"
                alt="Carta boca abajo"
                class="card-img loading"
              />
              } @else {
              <!-- Estado inicial sin next todavía -->
              <div class="card-placeholder">?</div>
              }
            </div>
          </div>

          <div class="result-message">{{ resultMessage() }}</div>

          <div class="actions">
            <button
              type="button"
              class="btn primary"
              (click)="guess('menor')"
              [disabled]="loading()"
            >
              Menor
            </button>
            <button
              type="button"
              class="btn primary"
              (click)="guess('mayor')"
              [disabled]="loading()"
            >
              Mayor
            </button>
          </div>
        </div>

        <div class="game-info">
          <span>Puntos: <b>{{ score() }}</b></span>
          <span>Rondas: <b>{{ rounds() }}</b></span>
        </div>

        <div class="footer-actions">
          <button
            class="btn secondary reset-btn"
            type="button"
            (click)="reset()"
            [disabled]="loading()"
          >
            <span class="icon" aria-hidden="true">↻</span>
            Reiniciar
          </button>
        </div>
        } @else if (finished()) {
        <!-- Fin del Juego -->
        <div class="end-game">
          <h3>Partida Terminada</h3>
          <p>Puntaje Final: <b>{{ score() }}</b> en {{ rounds() }} rondas.</p>
          <button class="btn primary" type="button" (click)="reset()">
            Jugar de Nuevo
          </button>
        </div>
        }
      </div>
    </div>
  </div>
</section>
