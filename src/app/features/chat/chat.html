<section class="chat">
  <h2>Sala de Chat</h2>

  <div class="box">
    <div class="messages">
      @if (messages$ | async; as messages) { @for (m of messages ?? []; track
      m.id ?? $index) {
      <div class="msg">
        <div class="meta">
          <span class="user">{{ m.email || 'usuario' }}</span>
          <span class="time">
            {{ (m.createdAt?.toDate ? m.createdAt.toDate() : m.createdAt) |
            date:'short' }}
          </span>
        </div>
        <div class="text">{{ m.text }}</div>
      </div>
      } @empty {
      <p class="empty">No hay mensajes.</p>
      } } @else {
      <p class="loading">Cargando…</p>
      }
    </div>
  </div>

  <form class="input" (ngSubmit)="send()">
    <input
      type="text"
      [(ngModel)]="text"
      name="text"
      placeholder="Escribí un mensaje…"
      autocomplete="off"
    />
    <button type="submit">Enviar</button>
  </form>
</section>
