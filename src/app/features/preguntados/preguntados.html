<section class="preg">
  <div class="home-grid">
    <div class="about-card blue-skin">
      <div class="hero">
        <h2>Adivina la Bandera üåç</h2>
        <div class="top-actions">
          <a routerLink="/" class="btn secondary">Volver</a>
        </div>
      </div>

      <div class="panel">
        @if (!finished()) {
        <p class="meta">Ronda {{ round() + 1 }} / {{ 10 }}</p>

        @if (loading()) {
        <div class="status-box">Cargando pregunta‚Ä¶</div>
        } @else if (error()) {
        <div class="error-container">
          <p class="err">{{ error() }}</p>
          <button class="btn secondary" (click)="retry()">Reintentar</button>
        </div>
        } @else if (q()) {
        <div class="flag">
          <img [src]="q()!.imageUrl" alt="Bandera del pa√≠s" />
        </div>

        <div class="options">
          @for (opt of q()!.options; track opt) {
          <button
            class="opt btn primary"
            [class.correct]="picked() && opt === q()!.correct"
            [class.wrong]="picked() && opt === picked() && opt !== q()!.correct"
            [disabled]="!!picked()"
            (click)="pick(opt)"
          >
            {{ opt }}
          </button>
          }
        </div>

        @if (picked()) {
        <div class="feedback">
          @if (picked() === q()!.correct) {
          <p class="ok">¬°Correcto!</p>
          } @else {
          <p class="err">Incorrecto. Era <b>{{ q()!.correct }}</b>.</p>
          }
          <div class="bottom-actions">
            <button class="btn secondary reset-btn" (click)="reset()">
              Reiniciar
            </button>
            <button class="btn primary" (click)="nextQuestion()">
              Siguiente
            </button>
          </div>
        </div>
        } } } @else {
        <div class="end-game">
          <h3>Partida terminada</h3>
          <p>Puntaje: <b>{{ score() }}</b> / {{ 10 }}</p>
          <div class="end-game-actions">
            <button class="btn secondary reset-btn" (click)="reset()">
              Reiniciar
            </button>
            <a routerLink="/" class="btn primary">Volver al Inicio</a>
          </div>
        </div>
        }
      </div>
    </div>
  </div>
</section>
